

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Help text for executables &mdash; Charliecloud 0.2.3~pre documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="search" title="Search" href="search.html"/>
        <link rel="copyright" title="Copyright" href="copyright.html"/>
    <link rel="top" title="Charliecloud 0.2.3~pre documentation" href="index.html"/>
        <link rel="next" title="4. VirtualBox appliance" href="virtualbox.html"/>
        <link rel="prev" title="2. Tutorial" href="tutorial.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Charliecloud
          

          
          </a>

          
            
            
              <div class="version">
                62d9bbc
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">1. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">2. Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Help text for executables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ch-build">3.1. ch-build</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ch-build2dir">3.2. ch-build2dir</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ch-docker2tar">3.3. ch-docker2tar</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ch-docker-run">3.4. ch-docker-run</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ch-run">3.5. ch-run</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ch-ssh">3.6. ch-ssh</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ch-tar2dir">3.7. ch-tar2dir</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="virtualbox.html">4. VirtualBox appliance</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">5. Frequently asked questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="copyright.html">6. Copyright and license</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Charliecloud</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>3. Help text for executables</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="help-text-for-executables">
<h1>3. Help text for executables<a class="headerlink" href="#help-text-for-executables" title="Permalink to this headline">¶</a></h1>
<p>This section contains the <code class="code docutils literal"><span class="pre">--help</span></code> output for each of the Charliecloud
exectuables.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#ch-build" id="id1">ch-build</a></li>
<li><a class="reference internal" href="#ch-build2dir" id="id2">ch-build2dir</a></li>
<li><a class="reference internal" href="#ch-docker2tar" id="id3">ch-docker2tar</a></li>
<li><a class="reference internal" href="#ch-docker-run" id="id4">ch-docker-run</a></li>
<li><a class="reference internal" href="#ch-run" id="id5">ch-run</a></li>
<li><a class="reference internal" href="#ch-ssh" id="id6">ch-ssh</a></li>
<li><a class="reference internal" href="#ch-tar2dir" id="id7">ch-tar2dir</a></li>
</ul>
</div>
<div class="section" id="ch-build">
<h2><a class="toc-backref" href="#id1">3.1. ch-build</a><a class="headerlink" href="#ch-build" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text"><div class="highlight"><pre><span></span>Wrapper for &quot;docker build&quot; that works around some of its annoying behaviors.

Usage:

  $ ch-build [ARGS ...]

ARGS are passed unchanged to &quot;docker build&quot; after the workaround arguments.

Workarounds:

  * Add the HTTP proxy environment variables with &quot;--build-arg&quot;.

  * Default to the Dockerfile in CWD with &quot;--file&quot;, if one exists and --file
    wasn&#39;t already specified, rather than the one at the root of the build
    context. This works around Docker&#39;s hostility to symlinks (e.g., see
    https://github.com/docker/docker/issues/1676).
</pre></div>
</div>
</div>
<div class="section" id="ch-build2dir">
<h2><a class="toc-backref" href="#id2">3.2. ch-build2dir</a><a class="headerlink" href="#ch-build2dir" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text"><div class="highlight"><pre><span></span>Build a Charliecloud image specified by $PWD/Dockerfile and unpack it.
Equivalent to ch-build, ch-docker2tar, ch-tar2dir sequence but somewhat less
flexible.

Usage:

  $ ch-build2dir CONTEXT DEST [ARGS ...]

Arguments:

  CONTEXT  Docker context directory
  DEST     Directory in which to place image tarball and directory
  ARGS     Additional arguments passed to ch-build

You must have sufficient privilege (via sudo) to run the Docker commands.
</pre></div>
</div>
</div>
<div class="section" id="ch-docker2tar">
<h2><a class="toc-backref" href="#id3">3.3. ch-docker2tar</a><a class="headerlink" href="#ch-docker2tar" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text"><div class="highlight"><pre><span></span>Flatten a Docker image into a Charliecloud image tarball.

Usage:

  $ ch-docker2tar IMAGE OUTDIR

You must have sufficient privilege (via sudo) to run the Docker commands.
</pre></div>
</div>
</div>
<div class="section" id="ch-docker-run">
<h2><a class="toc-backref" href="#id4">3.4. ch-docker-run</a><a class="headerlink" href="#ch-docker-run" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text"><div class="highlight"><pre><span></span>Run CMD in a Docker container TAG.

Usage:

  $ ch-docker-run [-i] [-b HOSTDIR:GUESTDIR ...] TAG CMD [ARGS ...]

The special sauce is:

  1. CMD runs as you, not root or whatever is specified in the Dockerfile.
  2. Users and groups inside the container match the host.
  3. /etc/hosts is patched up to use the network effectively.

Options:

  -i  Run interactively with a pseudo-TTY
  -b  Bind-mount HOSTDIR at GUESTDIR inside the container (can be repeated)

You must have sufficient privilege (via sudo) to run the Docker commands.
</pre></div>
</div>
</div>
<div class="section" id="ch-run">
<h2><a class="toc-backref" href="#id5">3.5. ch-run</a><a class="headerlink" href="#ch-run" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text"><div class="highlight"><pre><span></span>Usage: ch-run [OPTION...] NEWROOT CMD [ARG...]

Run a command in a Charliecloud container.

  -b, --bind=SRC[:DST]   mount SRC at guest DST (default /mnt/0, /mnt/1, etc.)
  -g, --gid=GID          run as GID within container
      --is-setuid        exit successfully if compiled for setuid, else fail
      --no-home          do not bind-mount your home directory
  -t, --private-tmp      use container-private /tmp
  -u, --uid=UID          run as UID within container
  -v, --verbose          be more verbose (debug if repeated)
  -w, --write            mount image read-write
  -?, --help             Give this help list
      --usage            Give a short usage message
  -V, --version          print version and exit

Example:

  $ ch-run /data/foo -- echo hello
  hello

You cannot use this program to actually change your UID.
</pre></div>
</div>
</div>
<div class="section" id="ch-ssh">
<h2><a class="toc-backref" href="#id6">3.6. ch-ssh</a><a class="headerlink" href="#ch-ssh" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text"><div class="highlight"><pre><span></span>Usage: CH_RUN_ARGS=&quot;NEWROOT [ARG...]&quot; ch-ssh [OPTION...] HOST CMD [ARG...]

Run a remote command in a Charliecloud container.

Example:

  $ export CH_RUN_ARGS=/data/foo
  $ ch-ssh example.com -- echo hello
  hello

Arguments to ch-run, including the image to activate, are specified in the
CH_RUN_ARGS environment variable. Important caveat: Words in CH_RUN_ARGS are
delimited by spaces only; it is not shell syntax. In particular, quotes and
and backslashes are not interpreted.
</pre></div>
</div>
</div>
<div class="section" id="ch-tar2dir">
<h2><a class="toc-backref" href="#id7">3.7. ch-tar2dir</a><a class="headerlink" href="#ch-tar2dir" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text"><div class="highlight"><pre><span></span>Unpack a Docker export tarball into a directory.

Usage:

  $ ch-tar2dir TARBALL DIR

Extract the tarball, which must be a Linux filesystem image e.g. from
ch-docker2tar, into a subdirectory of DIR named as the tarball with .tar.gz
removed. For example, if the tarball is foo.tar.gz, unpack into DIR/foo.

If the subdirectory doesn&#39;t exist, it is created. If it does exist and appears
to be a Charliecloud container image, it is removed and replaced. Otherwise,
the script aborts with an error.

Warning:

  Do not place DIR on a shared filesystem (e.g., your home directory, project
  space, scratch) unless specifically instructed by your site admins. Doing so
  may cause excess metadata load on the filesystem, resulting in poor
  performance for you and everyone else trying to do work at the same time.
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="virtualbox.html" class="btn btn-neutral float-right" title="4. VirtualBox appliance" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tutorial.html" class="btn btn-neutral" title="2. Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; <a href="copyright.html">Copyright</a> 2014–2017, Los Alamos National Security, LLC.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.2.3~pre',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>